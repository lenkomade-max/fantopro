# üìä –û—Ç—á–µ—Ç –æ–± –∞–Ω–∞–ª–∏–∑–µ –Ω–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞

**–î–∞—Ç–∞:** 30 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞:** 19:39 UTC  
**–°—Ç–∞—Ç—É—Å:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –ø—Ä–æ–±–ª–µ–º—ã –≤—ã—è–≤–ª–µ–Ω—ã

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –£–≤–µ–ª–∏—á–µ–Ω—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã polling –¥–æ 60 —Å–µ–∫—É–Ω–¥

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API (–∫–∞–∂–¥—ã–µ 10-30 —Å–µ–∫—É–Ω–¥) —Å–æ–∑–¥–∞–≤–∞–ª–∏ –≤—ã—Å–æ–∫—É—é –Ω–∞–≥—Ä—É–∑–∫—É.

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `trend-maker-site/app/templates/index.html` (—Å—Ç—Ä–æ–∫–∞ 147)
  - –ë—ã–ª–æ: `setInterval(loadSyncStats, 10000)` (10 —Å–µ–∫—É–Ω–¥)
  - –°—Ç–∞–ª–æ: `setInterval(loadSyncStats, 60000)` (60 —Å–µ–∫—É–Ω–¥)

- `trend-maker-site/app/static/js/main.js` (—Å—Ç—Ä–æ–∫–∏ 77, 93)
  - –ë—ã–ª–æ: `setInterval(checkSyncStatus, 30000)` (30 —Å–µ–∫—É–Ω–¥)
  - –°—Ç–∞–ª–æ: `setInterval(checkSyncStatus, 60000)` (60 —Å–µ–∫—É–Ω–¥)
  - –ë—ã–ª–æ: `setInterval(..., 30000)` –¥–ª—è –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
  - –°—Ç–∞–ª–æ: `setInterval(..., 60000)` –¥–ª—è –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —Å ~14/–º–∏–Ω—É—Ç—É –¥–æ ~2/–º–∏–Ω—É—Ç—É (—Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ ~85%)

---

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö scheduler —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ö Flask –º–æ–≥–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ BackgroundScheduler.

**–§–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω:**
- `trend-maker-site/app/scheduler_service.py`
  - –î–æ–±–∞–≤–ª–µ–Ω `threading.Lock()` (—Å—Ç—Ä–æ–∫–∞ 35)
  - –£–ª—É—á—à–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –≤ –º–µ—Ç–æ–¥–µ `start()` (—Å—Ç—Ä–æ–∫–∏ 56-72)
  - –£–ª—É—á—à–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –≤ –º–µ—Ç–æ–¥–µ `stop()` (—Å—Ç—Ä–æ–∫–∏ 74-86)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò—Å–∫–ª—é—á–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ scheduler'—ã –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ö Flask.

---

## üìà –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

### Flask —Å–µ—Ä–≤–µ—Ä (trend-maker-site)

**–§–∞–π–ª –ª–æ–≥–æ–≤:**
- `trend-maker-site/server.log`

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- CPU: **1.3%** ‚úÖ
- –ü–∞–º—è—Ç—å: **0.8%** (66 MB) ‚úÖ
- –ó–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É: **~2** (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
- Load Average: **0.41, 0.49, 0.53** ‚úÖ

**–ü—Ä–æ—Ü–µ—Å—Å—ã:**
- PID 307102: `/home/developer/projects/FantaProjekt/trend-maker-site/venv/bin/python run.py`
  - CPU: 1.3%
  - –ü–∞–º—è—Ç—å: 0.8%
  - –°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–µ–Ω, —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 5000

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- `trend-maker-site/config.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Flask
- `trend-maker-site/run.py` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `trend-maker-site/app/__init__.py` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ scheduler

---

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (fantaprojekt)

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- CPU: **0.00%** ‚úÖ
- –ü–∞–º—è—Ç—å: **62.91 MiB / 7.57 GiB (0.8%)** ‚úÖ
- –°–µ—Ç—å: 1.81 GB –≤—Ö–æ–¥—è—â–∏–π / 332 MB –∏—Å—Ö–æ–¥—è—â–∏–π
- –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 1000 —Å—Ç—Ä–æ–∫–∞—Ö: **64**

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- `docker-compose.yml` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `Dockerfile` - –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

---

## ‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. PayloadTooLargeError –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ fantaprojekt

**–ü—Ä–æ–±–ª–µ–º–∞:** 8 –æ—à–∏–±–æ–∫ "request entity too large" –≤ –ª–æ–≥–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

**–§–∞–π–ª—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ª–∏–º–∏—Ç–∞:**
- `src/server/server.ts` (—Å—Ç—Ä–æ–∫–∏ 34-35)
  ```typescript
  this.app.use(express.json({ limit: '150mb' }));
  this.app.use(express.urlencoded({ limit: '150mb', extended: true }));
  ```

- `src/server/routers/rest.ts` (—Å—Ç—Ä–æ–∫–∏ 34-35)
  ```typescript
  this.router.use(express.json({ limit: "150mb" }));
  this.router.use(express.urlencoded({ limit: "150mb", extended: true }));
  ```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –¥–æ 200-300mb –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –¥—Ä—É–≥–∏—Ö middleware —Å –º–µ–Ω—å—à–∏–º –ª–∏–º–∏—Ç–æ–º.

**–õ–æ–≥–∏:**
- `docker logs fantaprojekt 2>&1 | grep PayloadTooLargeError`

---

### 2. –î—É–±–ª–∏—Ä—É—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** 8 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ 2 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤–∏–¥–µ–æ.

**–§–∞–π–ª—ã:**
- `src/short-creator/ShortCreator.ts`
  - –°—Ç—Ä–æ–∫–∞ 94: `// todo add mutex lock` - TODO –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω
  - –°—Ç—Ä–æ–∫–∞ 121: `// todo add a semaphore` - TODO –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω
  - –ú–µ—Ç–æ–¥ `processQueue()` (—Å—Ç—Ä–æ–∫–∏ 120-167) - –Ω–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- `src/monitoring/ProcessMonitor.ts`
  - –ú–µ—Ç–æ–¥ `sendDualProcessAlert()` (—Å—Ç—Ä–æ–∫–∏ 172-187) - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
  - –ú–µ—Ç–æ–¥ `checkResources()` (—Å—Ç—Ä–æ–∫–∏ 157-167) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å semaphore/mutex –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—á–µ—Ä–µ–¥–∏ –æ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

**–õ–æ–≥–∏:**
- `docker logs fantaprojekt 2>&1 | grep dual_processes`

---

## üìÅ –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤, –≤–ª–∏—è—é—â–∏—Ö –Ω–∞ –Ω–∞–≥—Ä—É–∑–∫—É

### Flask —Å–µ—Ä–≤–µ—Ä (trend-maker-site)

**Frontend (JavaScript polling):**
- `trend-maker-site/app/templates/index.html` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å polling –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫
- `trend-maker-site/app/static/js/main.js` - –æ–±—â–∏–π JS —Å polling –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫
- `trend-maker-site/app/templates/workflow.html` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ workflow (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ polling)

**Backend (API endpoints):**
- `trend-maker-site/app/routes.py` - –≤—Å–µ API –º–∞—Ä—à—Ä—É—Ç—ã
  - `/api/sync/stats` (—Å—Ç—Ä–æ–∫–∞ ~390) - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - `/api/workflow/<content_type>/status` (—Å—Ç—Ä–æ–∫–∞ 188) - —Å—Ç–∞—Ç—É—Å workflow

**Background tasks:**
- `trend-maker-site/app/scheduler_service.py` - —Ñ–æ–Ω–æ–≤—ã–π scheduler (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
- `trend-maker-site/app/sync_service.py` - —Å–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Google Sheets
- `trend-maker-site/app/__init__.py` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è scheduler (—Å—Ç—Ä–æ–∫–∞ 52, 58)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- `trend-maker-site/config.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Flask, –ø–æ—Ä—Ç—ã, –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
- `trend-maker-site/run.py` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–õ–æ–≥–∏:**
- `trend-maker-site/server.log` - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ —Å–µ—Ä–≤–µ—Ä–∞

---

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (fantaprojekt)

**–°–µ—Ä–≤–µ—Ä –∏ API:**
- `src/server/server.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π Express —Å–µ—Ä–≤–µ—Ä
  - –°—Ç—Ä–æ–∫–∏ 34-35: –ª–∏–º–∏—Ç body-parser (150mb)
  
- `src/server/routers/rest.ts` - REST API —Ä–æ—É—Ç–µ—Ä
  - –°—Ç—Ä–æ–∫–∏ 34-35: –ª–∏–º–∏—Ç body-parser (150mb)
  - –°—Ç—Ä–æ–∫–∏ 40-315: –≤—Å–µ API endpoints

**–û—á–µ—Ä–µ–¥—å –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:**
- `src/short-creator/ShortCreator.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–µ–æ
  - –°—Ç—Ä–æ–∫–∞ 29: –æ—á–µ—Ä–µ–¥—å –≤–∏–¥–µ–æ
  - –°—Ç—Ä–æ–∫–∞ 94: `addToQueue()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å (TODO: mutex lock)
  - –°—Ç—Ä–æ–∫–∞ 120: `processQueue()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ (TODO: semaphore)
  - –°—Ç—Ä–æ–∫–∏ 120-167: –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**
- `src/monitoring/ProcessMonitor.ts` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
  - –°—Ç—Ä–æ–∫–∏ 157-167: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
  - –°—Ç—Ä–æ–∫–∏ 172-187: –∞–ª–µ—Ä—Ç—ã –æ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- `src/config.ts` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `docker-compose.yml` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `Dockerfile` - –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–õ–æ–≥–∏:**
- `docker logs fantaprojekt` - –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ó–∞—â–∏—Ç–∞ –æ—á–µ—Ä–µ–¥–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

**–§–∞–π–ª:** `src/short-creator/ShortCreator.ts`

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –î–æ–±–∞–≤–∏—Ç—å semaphore –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å mutex lock –¥–ª—è `addToQueue()`

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:**
```typescript
import { Semaphore } from 'async-mutex';

export class ShortCreator {
  private renderSemaphore = new Semaphore(1); // –¢–æ–ª—å–∫–æ 1 –ø—Ä–æ—Ü–µ—Å—Å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
  
  private async processQueue(): Promise<void> {
    await this.renderSemaphore.acquire();
    try {
      // —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞
    } finally {
      this.renderSemaphore.release();
      // –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—á–µ—Ä–µ–¥–∏
    }
  }
}
```

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ body-parser

**–§–∞–π–ª—ã:**
- `src/server/server.ts` (—Å—Ç—Ä–æ–∫–∏ 34-35)
- `src/server/routers/rest.ts` (—Å—Ç—Ä–æ–∫–∏ 34-35)

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
–ò–∑–º–µ–Ω–∏—Ç—å –ª–∏–º–∏—Ç —Å `150mb` –Ω–∞ `300mb` –∏–ª–∏ `500mb`:
```typescript
this.app.use(express.json({ limit: '300mb' }));
this.app.use(express.urlencoded({ limit: '300mb', extended: true }));
```

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ /api/workflow/status

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥, –Ω–æ –≤ –∫–æ–¥–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≥–¥–µ —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ.

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `trend-maker-site/app/templates/workflow.html` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–∫—Ä—ã—Ç–æ–≥–æ polling
- `trend-maker-site/app/static/js/main.js` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ setInterval
- –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ DevTools –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ –∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### Flask —Å–µ—Ä–≤–µ—Ä

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----------------|-------------------|-----------|
| –ó–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É | ~14 | ~2 | **-85%** |
| CPU Flask –ø—Ä–æ—Ü–µ—Å—Å–∞ | ~2-3% | 1.3% | **-35%** |
| –ò–Ω—Ç–µ—Ä–≤–∞–ª polling | 10-30 —Å–µ–∫ | 60 —Å–µ–∫ | **+200-500%** |

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|------------------|--------|
| CPU | 0.00% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| –ü–∞–º—è—Ç—å | 0.8% (63 MB) | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| PayloadTooLargeError | 8 –æ—à–∏–±–æ–∫ | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| –î—É–±–ª–∏—Ä—É—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã | 8 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:
- Flask —Å–µ—Ä–≤–µ—Ä: –Ω–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã polling: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–æ 60 —Å–µ–∫—É–Ω–¥
- Scheduler: –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. **PayloadTooLargeError** - —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç body-parser
2. **–î—É–±–ª–∏—Ä—É—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞** - –¥–æ–±–∞–≤–∏—Ç—å semaphore/mutex
3. **–ó–∞–ø—Ä–æ—Å—ã –∫ /api/workflow/status** - –Ω–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫

---

## üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### Flask —Å–µ—Ä–≤–µ—Ä:
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã
tail -f trend-maker-site/server.log | grep "GET /api"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã Flask
ps aux | grep "python.*run.py"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ CPU
top -bn1 | grep "%Cpu"
```

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stats fantaprojekt --no-stream

# –õ–æ–≥–∏ —Å –æ—à–∏–±–∫–∞–º–∏
docker logs fantaprojekt 2>&1 | grep -E "error|Error|ERROR|PayloadTooLargeError"

# –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
docker logs fantaprojekt 2>&1 | grep "dual_processes"
```

---

**–§–∞–π–ª —Å–æ–∑–¥–∞–Ω:** 30 –æ–∫—Ç—è–±—Ä—è 2025, 19:45 UTC  
**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** Claude Code (Auto)

