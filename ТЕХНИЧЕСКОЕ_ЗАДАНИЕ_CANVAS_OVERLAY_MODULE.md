# –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï: –°–û–ó–î–ê–ù–ò–ï CANVAS API –ú–û–î–£–õ–Ø –î–õ–Ø OVERLAY –≠–§–§–ï–ö–¢–û–í

**–î–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞**  
**–î–∞—Ç–∞:** 15 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** –ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

---

## üìã –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï –ó–ê–î–ê–ß–ò

–°–æ–∑–¥–∞—Ç—å **–Ω–æ–≤—ã–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–¥—É–ª—å** –¥–ª—è –Ω–∞–ª–æ–∂–µ–Ω–∏—è –≤–∏–¥–µ–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Canvas API**, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É CSS-based —Ä–µ—à–µ–Ω–∏—é –≤ –≤–∏–¥–µ–æ—Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.

### üéØ –¶–ï–õ–¨
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥–µ–æ –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ –∫–∞–∫ –≤ **CapCut**, –≥–¥–µ:
- Overlay —ç—Ñ—Ñ–µ–∫—Ç—ã —Å —á–µ—Ä–Ω—ã–º —Ñ–æ–Ω–æ–º –Ω–µ –∑–∞—Ç–µ–º–Ω—è—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–µ –≤–∏–¥–µ–æ
- –†–µ–∂–∏–º "screen" –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–±–∏—Ä–∞–µ—Ç —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω
- –≠—Ñ—Ñ–µ–∫—Ç—ã –≤–∏–¥–Ω—ã –Ω–∞ 100% –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ (opacity=1.0)
- –†–µ–∫–ª–∞–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã —Å —á–µ—Ä–Ω—ã–º —Ñ–æ–Ω–æ–º –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- **React** + **TypeScript**
- **Remotion** 4.0.358 (–≤–∏–¥–µ–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
- **Canvas API** (–≤–∞—à–∞ –∑–∞–¥–∞—á–∞)
- **Node.js** backend

### –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ overlay:
```
src/remotion/compositions/BlendOverlay.tsx - CSS mixBlendMode (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π)
src/short-creator/effects/EffectManager.ts - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
src/components/videos/PortraitVideo.tsx - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç—Ä–µ—Ç–Ω–æ–µ –≤–∏–¥–µ–æ
src/components/videos/LandscapeVideo.tsx - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–ª—å–±–æ–º–Ω–æ–µ –≤–∏–¥–µ–æ
```

### –§–æ—Ä–º–∞—Ç—ã overlay —Ñ–∞–π–ª–æ–≤:
- **MP4 –≤–∏–¥–µ–æ** (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç)
- **PNG/JPG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** (—Å—Ç–∞—Ç–∏—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã)
- –†–∞–∑–º–µ—Ä—ã: –¥–æ 50MB
- –†–∞–∑—Ä–µ—à–µ–Ω–∏—è: —Ä–∞–∑–ª–∏—á–Ω—ã–µ (auto-scale)

---

## üéØ –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï

### –°–û–ó–î–ê–¢–¨ –ù–û–í–´–ï –§–ê–ô–õ–´:

#### 1. **–û—Å–Ω–æ–≤–Ω–æ–π Canvas –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**
**–ü—É—Ç—å:** `src/remotion/compositions/CanvasBlendOverlay.tsx`
- React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è Remotion
- Canvas API –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö CSS blend modes —á–µ—Ä–µ–∑ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–∏–¥–µ–æ –∫–∞–¥—Ä–∞–º–∏ Remotion
- Fallback —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

#### 2. **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ blend modes**
**–ü—É—Ç—å:** `src/utils/canvas/BlendModes.ts`
- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ –Ω–∞–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–æ–≤: screen, multiply, overlay, add, lighten, darken, color-dodge, color-burn, exclusion, difference, soft-light, hard-light, vivid-light, linear-light, pin-light, hard-mix, hue, saturation, color, luminosity
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 3. **Canvas —É—Ç–∏–ª–∏—Ç—ã**
**–ü—É—Ç—å:** `src/utils/canvas/CanvasUtils.ts`
- –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Canvas
- –û–±—Ä–∞–±–æ—Ç–∫–∞ pixel data
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é Canvas
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 4. **–¢–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**
**–ü—É—Ç—å:** `src/types/canvas-overlay.ts`
- TypeScript —Ç–∏–ø—ã –¥–ª—è Canvas –º–æ–¥—É–ª—è
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

#### 5. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è**
**–ü—É—Ç—å:** `src/config/canvas-overlay.ts`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã (Canvas/CSS fallback)

### –ò–ó–ú–ï–ù–ò–¢–¨ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –§–ê–ô–õ–´:

#### 1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ PortraitVideo**
**–ü—É—Ç—å:** `src/components/videos/PortraitVideo.tsx`
**–°—Ç—Ä–æ–∫–∏:** 18, 129-140
- –ò–º–ø–æ—Ä—Ç –Ω–æ–≤–æ–≥–æ CanvasBlendOverlay
- –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ Canvas/CSS overlay
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

#### 2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ LandscapeVideo**
**–ü—É—Ç—å:** `src/components/videos/LandscapeVideo.tsx`
**–°—Ç—Ä–æ–∫–∏:** 18, 117-128
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ PortraitVideo
- –ò–º–ø–æ—Ä—Ç –∏ —É—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

#### 3. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ EffectManager**
**–ü—É—Ç—å:** `src/short-creator/effects/EffectManager.ts`
**–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Canvas
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

---

## üìä –ò–ù–¢–ï–†–§–ï–ô–° –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–ò

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å BlendOverlay:
```typescript
interface BlendOverlayProps {
  overlayPath: string;           // –ü—É—Ç—å –∫ overlay —Ñ–∞–π–ª—É
  staticEffectPath?: string;     // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å –¥–ª—è staticFile()
  blendMode: string;             // CSS blend mode
  opacity?: number;              // 0.0 - 1.0
  isVideo: boolean;              // –í–∏–¥–µ–æ –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  duration?: "full" | { start: number; end: number };
  sceneDuration: number;         // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ü–µ–Ω—ã –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
}
```

### –í–∞—à Canvas –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –î–û–õ–ñ–ï–ù:
- –ü—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–µ –∂–µ props
- –†–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ drop-in replacement
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ

---

## üéØ –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø:

1. **Pixel-perfect –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥** - —Ç–æ—á–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∫–∞–∫ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤–∏–¥–µ–æ—Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –Ω–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ CSS —Ä–µ—à–µ–Ω–∏—è  
3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Remotion** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å video frames –∏ timing
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–Ω–æ–≥–æ —Ñ–æ–Ω–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–ª—è —Ä–µ–∂–∏–º–∞ "screen"
5. **Fallback —Å–∏—Å—Ç–µ–º–∞** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ CSS –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö Canvas
6. **Memory management** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ Canvas —Ä–µ—Å—É—Ä—Å–æ–≤
7. **TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò:

1. **Remotion –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useCurrentFrame()` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `Sequence` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å `staticFile()` –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤

2. **Canvas –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - OffscreenCanvas –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤
   - –£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞–º–∏ Canvas

3. **–í–∏–¥–µ–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è video —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å Canvas
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∏–¥–µ–æ —Ñ–æ—Ä–º–∞—Ç–æ–≤
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å loop –∏ startFrom

### üö´ –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:

- –ù–ï –∏–∑–º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
- –ù–ï –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π CSS-based —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ù–ï —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebGL (—Ç–æ–ª—å–∫–æ Canvas 2D API)

---

## üìã –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–ú–´–ï BLEND MODES

–í–∞—à –º–æ–¥—É–ª—å –î–û–õ–ñ–ï–ù –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤—Å–µ —Ä–µ–∂–∏–º—ã:

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∂–∏–º—ã:
- `normal` - –±–∞–∑–æ–≤–æ–µ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ
- `screen` - –æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ (–ö–†–ò–¢–ò–ß–ù–´–ô –¥–ª—è —á–µ—Ä–Ω–æ–≥–æ —Ñ–æ–Ω–∞)
- `multiply` - –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ  
- `overlay` - –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ–µ —Å–º–µ—à–∏–≤–∞–Ω–∏–µ
- `add`/`lighter` - –∞–¥–¥–∏—Ç–∏–≤–Ω–æ–µ —Å–º–µ—à–∏–≤–∞–Ω–∏–µ

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã:
- `lighten`, `darken` - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏
- `color-dodge`, `color-burn` - —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ –æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ/–∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ
- `difference`, `exclusion` - –∏–Ω–≤–µ—Ä—Å–∏—è
- `soft-light`, `hard-light` - –º—è–≥–∫–æ–µ/–∂–µ—Å—Ç–∫–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
- `vivid-light`, `linear-light`, `pin-light` - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã
- `hard-mix` - –ø–æ—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
- `hue`, `saturation`, `color`, `luminosity` - —Ä–∞–±–æ—Ç–∞ —Å —Ü–≤–µ—Ç–æ–º

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–±—É–¥—É—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã):
```
test-screen-mode.json - —Ç–µ—Å—Ç —Ä–µ–∂–∏–º–∞ screen
test-multiply-mode.json - —Ç–µ—Å—Ç —Ä–µ–∂–∏–º–∞ multiply  
test-overlay-mode.json - —Ç–µ—Å—Ç —Ä–µ–∂–∏–º–∞ overlay
test-add-low-opacity.json - —Ç–µ—Å—Ç —Å –Ω–∏–∑–∫–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
test-overlays-api.json - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç
```

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- VHS —ç—Ñ—Ñ–µ–∫—Ç—ã —Å —á–µ—Ä–Ω—ã–º —Ñ–æ–Ω–æ–º –Ω–µ –∑–∞—Ç–µ–º–Ω—è—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–µ –≤–∏–¥–µ–æ
- –†–µ–∫–ª–∞–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –ø–æ–ª–Ω–æ–π —è—Ä–∫–æ—Å—Ç—å—é
- –≠—Ñ—Ñ–µ–∫—Ç —Å–Ω–µ–≥–∞ –≤–∏–¥–µ–Ω –Ω–∞ 100% –ø—Ä–∏ opacity=1.0
- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω CapCut

---

## üì¶ –°–¢–†–£–ö–¢–£–†–ê –ú–û–î–£–õ–Ø

### –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:
```
src/
‚îú‚îÄ‚îÄ remotion/compositions/
‚îÇ   ‚îú‚îÄ‚îÄ BlendOverlay.tsx (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π CSS)
‚îÇ   ‚îî‚îÄ‚îÄ CanvasBlendOverlay.tsx (–≤–∞—à –Ω–æ–≤—ã–π)
‚îú‚îÄ‚îÄ utils/canvas/
‚îÇ   ‚îú‚îÄ‚îÄ BlendModes.ts (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ blend modes)
‚îÇ   ‚îî‚îÄ‚îÄ CanvasUtils.ts (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ canvas-overlay.ts (TypeScript —Ç–∏–ø—ã)
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ canvas-overlay.ts (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
‚îî‚îÄ‚îÄ components/videos/
    ‚îú‚îÄ‚îÄ PortraitVideo.tsx (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
    ‚îî‚îÄ‚îÄ LandscapeVideo.tsx (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
```

---

## üéØ –ö–†–ò–¢–ï–†–ò–ò –ü–†–ò–ï–ú–ö–ò

### ‚úÖ –ú–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–æ–≥–¥–∞:

1. **–°–æ–∑–¥–∞–ª –≤—Å–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
2. **Canvas –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –≤–∏–¥–µ–æ+overlay —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. **–í—Å–µ blend modes —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã** - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è** - –Ω–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ CSS —Ä–µ—à–µ–Ω–∏—è
5. **TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è** - –Ω–µ—Ç any —Ç–∏–ø–æ–≤
6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞** - README —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
7. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞** - —Ç–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ –≤–∏–¥–µ–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### üîç –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ:
- **–†–µ–∂–∏–º "screen"** –¥–æ–ª–∂–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±–∏—Ä–∞—Ç—å —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω
- **Opacity=1.0** –¥–æ–ª–∂–Ω–∞ –¥–∞–≤–∞—Ç—å 100% –≤–∏–¥–∏–º–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∞
- **–ü–∞–º—è—Ç—å Canvas** –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—á–∏—â–∞—Ç—å—Å—è
- **Fallback –Ω–∞ CSS** –ø—Ä–∏ –ª—é–±—ã—Ö –æ—à–∏–±–∫–∞—Ö Canvas

---

## üìû –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ü–û–î–î–ï–†–ñ–ö–ê

–ü—Ä–∏ –≤–æ–ø—Ä–æ—Å–∞—Ö –æ:
- **Remotion API** - –∏–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Remotion
- **Canvas optimization** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ Web API
- **Blend mode –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞** - –Ω–∞–π–¥–∏—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ CSS Compositing
- **TypeScript —Ç–∏–ø—ã** - —Å–ª–µ–¥—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ø—Ä–æ–µ–∫—Ç–∞

---

**–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ production —Å–∏—Å—Ç–µ–º—É. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã.

**–¶–µ–ª—å:** –°–¥–µ–ª–∞—Ç—å overlay —ç—Ñ—Ñ–µ–∫—Ç—ã —Ç–∞–∫–∏–º–∏ –∂–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–∞–∫ –≤ CapCut!