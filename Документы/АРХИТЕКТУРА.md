# üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê: FantaProjekt

**–î–∞—Ç–∞**: 13 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è**: 1.0.0

---

## üéØ –ü–†–ò–ù–¶–ò–ü–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò

### 1. **–ù–µ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–Ω–æ—Å—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª–∞**
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ short-video-maker –ù–ï –ú–ï–ù–Ø–ï–¢–°–Ø
- –í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ –†–ê–°–®–ò–†–ï–ù–ò–Ø
- 100% –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### 2. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- –ö–∞–∂–¥–∞—è –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è = –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏

### 3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã

---

## üì¶ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
FantaProjekt/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/                    # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–ù–ï –¢–†–û–ì–ê–¢–¨!)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ShortCreator.ts     # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Pexels.ts           # Pexels API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Kokoro.ts           # TTS –æ–∑–≤—É—á–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Whisper.ts          # –°—É–±—Ç–∏—Ç—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Remotion.ts         # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ extensions/              # –ù–û–í–´–ï —Ñ—É–Ω–∫—Ü–∏–∏ (–¥–æ–±–∞–≤–ª—è–µ–º –∑–¥–µ—Å—å)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sources/            # –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SourceFactory.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ URLSource.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FileSource.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PexelsSource.ts (–∞–¥–∞–ø—Ç–µ—Ä)
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ effects/            # –°–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EffectManager.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OverlayEffect.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BlendModes.ts
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ overlays/           # –¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ–≤–µ—Ä–ª–µ–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TextOverlay.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AnimatedText.ts
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pipeline/           # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ EnhancedPipeline.ts
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ContentProcessor.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ types/                   # –¢–∏–ø—ã TypeScript
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core.ts             # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ extensions.ts       # –ù–æ–≤—ã–µ —Ç–∏–ø—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ server/                  # API —Å–µ—Ä–≤–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mcp-server.ts       # MCP –ø—Ä–æ—Ç–æ–∫–æ–ª
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rest-server.ts      # REST API
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/              # Remotion –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PortraitVideo.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LandscapeVideo.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EffectLayer.tsx     # –ù–û–í–´–ô
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ remotion/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ compositions/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SimpleOverlay.tsx       # Production overlay (onVideoFrame API)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ BlendOverlay.tsx        # Deprecated stub
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                 # –ì–ª–∞–≤–Ω—ã–π entry point
‚îÇ
‚îú‚îÄ‚îÄ static/                      # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ music/                  # –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ effects/                # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–ù–û–í–û–ï)
‚îÇ       ‚îú‚îÄ‚îÄ vhs-glitch.mp4
‚îÇ       ‚îú‚îÄ‚îÄ light-leak.mp4
‚îÇ       ‚îî‚îÄ‚îÄ falling-snow.mp4
‚îÇ
‚îú‚îÄ‚îÄ –î–æ–∫—É–º–µ–Ω—Ç—ã/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ –ú–ê–ù–ò–§–ï–°–¢_–ü–†–û–ï–ö–¢–ê.md
‚îÇ   ‚îú‚îÄ‚îÄ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê.md (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îÇ   ‚îú‚îÄ‚îÄ API_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md
‚îÇ   ‚îî‚îÄ‚îÄ –ü–†–ò–ú–ï–†–´.md
‚îÇ
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

---

## üîÑ –ü–û–¢–û–ö –î–ê–ù–ù–´–•

### –ë–∞–∑–æ–≤—ã–π –ø–æ—Ç–æ–∫ (–æ—Ä–∏–≥–∏–Ω–∞–ª):
```
JSON Input
  ‚Üì
ShortCreator.create()
  ‚Üì
N8n to Fanta/ Pexels.search() ‚Üí –Ω–∞–π—Ç–∏ –≤–∏–¥–µ–æ (–∏–ª–∏ –∂–µ —Å–≤–æ–∏ —Ñ–æ—Ç–æ - –≤–∏–¥–µ–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã)
  ‚Üì
Kokoro.synthesize() ‚Üí –æ–∑–≤—É—á–∫–∞
  ‚Üì
Whisper.transcribe() ‚Üí —Å—É–±—Ç–∏—Ç—Ä—ã
  ‚Üì
Remotion.render() ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ
  ‚Üì
MP4 Output
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ (–Ω–æ–≤—ã–π):
```
JSON Input
  ‚Üì
ShortCreator.create()
  ‚Üì
SourceFactory.getSource() ‚Üí –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
  ‚îú‚îÄ PexelsSource (–µ—Å–ª–∏ searchTerms)
  ‚îú‚îÄ URLSource (–µ—Å–ª–∏ media.type = url)
  ‚îî‚îÄ FileSource (–µ—Å–ª–∏ media.type = file)
  ‚Üì
ContentProcessor.process() ‚Üí –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
  ‚Üì
EffectManager.apply() ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
  ‚Üì
TextOverlay.render() ‚Üí –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
  ‚Üì
Kokoro.synthesize() ‚Üí –æ–∑–≤—É—á–∫–∞
  ‚Üì
Whisper.transcribe() ‚Üí —Å—É–±—Ç–∏—Ç—Ä—ã
  ‚Üì
EnhancedPipeline.render() ‚Üí —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
  ‚Üì
MP4 Output
```

---

## üß© –ö–õ–Æ–ß–ï–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 0. Overlay-–º–æ–¥—É–ª—å (Production —Å–∏—Å—Ç–µ–º–∞ - v1.3.6)
**–û–ë–ù–û–í–õ–ï–ù–ò–ï 18.10.2025**: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–µ–Ω–∞! –û—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω production overlay –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

**SimpleOverlay** (`SimpleOverlay.tsx`) - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è production —Å–∏—Å—Ç–µ–º–∞:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Remotion `onVideoFrame` API
- HTML5 Canvas API —Å `globalCompositeOperation` –¥–ª—è blend modes
- `<Loop>` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Remotion –¥–ª—è –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è overlay –≤–∏–¥–µ–æ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 20+ blend modes: screen, overlay, multiply, lighten, darken, color-dodge, –∏ —Ç.–¥.
- –ò—Å—Ç–æ—á–Ω–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤: `static/effects/*` —á–µ—Ä–µ–∑ `staticFile(staticEffectPath)`
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å webpack
- –ü—Ä–æ—Å—Ç–∞—è, –ø–æ–Ω—è—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** (—É–¥–∞–ª–µ–Ω—ã/–∑–∞–≥–ª—É—à–µ–Ω—ã):
- `BlendOverlay.tsx` - CSS overlay (–∑–∞–≥–ª—É—à–µ–Ω –∫–∞–∫ deprecated stub, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null)
- `CanvasBlendOverlay.tsx` - Canvas API –º–æ–¥—É–ª—å (–ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω –≤ v1.3.6)
- `config/canvas-overlay.ts` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Canvas (—É–¥–∞–ª—ë–Ω)
- `CanvasOverlayBrowser.ts` - –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π —Å–ª–æ–π (—É–¥–∞–ª—ë–Ω)
- `/src/utils/canvas/` - Canvas —É—Ç–∏–ª–∏—Ç—ã (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∞)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –æ—á–∏—Å—Ç–∫–∏**: –°–º. [CLEANUP_JOURNAL_2025-10-18.md](../CLEANUP_JOURNAL_2025-10-18.md)

### 1. SourceFactory (–§–∞–±—Ä–∏–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
**–ó–∞–¥–∞—á–∞**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ –ª—é–±–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

```typescript
interface ContentSource {
  type: 'pexels' | 'url' | 'file';
  fetch(): Promise<MediaContent>;
}

class SourceFactory {
  static create(input: SceneInput): ContentSource {
    if (input.searchTerms) return new PexelsSource(input);
    if (input.media?.type === 'url') return new URLSource(input);
    if (input.media?.type === 'file') return new FileSource(input);
    throw new Error('Unknown source type');
  }
}
```

### 2. EffectManager (–ú–µ–Ω–µ–¥–∂–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç–æ–≤)
**–ó–∞–¥–∞—á–∞**: –ü—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞–ª–æ–∂–µ–Ω–∏—è —Å blend modes

```typescript
interface OverlayEffect {
  source: string;        // –ø—É—Ç—å –∫ —ç—Ñ—Ñ–µ–∫—Ç—É
  blendMode: BlendMode;  // —Ä–µ–∂–∏–º –Ω–∞–ª–æ–∂–µ–Ω–∏—è
  opacity: number;       // –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
  loop?: boolean;        // –∑–∞—Ü–∏–∫–ª–∏–≤–∞—Ç—å?
}

class EffectManager {
  apply(base: VideoLayer, effects: OverlayEffect[]): CompositeLayer {
    return effects.reduce((result, effect) => {
      return this.blendLayers(result, effect);
    }, base);
  }
}
```

### 3. TextOverlay (–¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ–≤–µ—Ä–ª–µ–∏)
**–ó–∞–¥–∞—á–∞**: –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–π –∏–ª–∏ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

```typescript
interface TextOverlayConfig {
  text: string;
  position: 'top' | 'bottom' | 'center';
  style: TextStyle;
  animation?: AnimationConfig;
}

class TextOverlay {
  render(config: TextOverlayConfig): RemotionComponent {
    return (
      <AbsoluteFill style={this.getPositionStyle(config.position)}>
        <Text style={config.style}>{config.text}</Text>
      </AbsoluteFill>
    );
  }
}
```

### 4. EnhancedPipeline (–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω)
**–ó–∞–¥–∞—á–∞**: –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤–º–µ—Å—Ç–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏

```typescript
class EnhancedPipeline {
  async render(input: CreateShortInput): Promise<VideoOutput> {
    // 1. –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç (–Ω–æ–≤–æ–µ –∏–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª)
    const content = await this.getContent(input);
    
    // 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
    const withEffects = await this.applyEffects(content, input.effects);
    
    // 3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
    const withText = await this.addTextOverlays(withEffects, input.textOverlays);
    
    // 4. –û–†–ò–ì–ò–ù–ê–õ–¨–ù–ê–Ø –ª–æ–≥–∏–∫–∞: TTS + Whisper + Remotion
    return await this.originalPipeline.render(withText);
  }
}
```

---

## üé® –°–ò–°–¢–ï–ú–ê BLEND MODES

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ª–æ–∂–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:

```typescript
// –ë–∞–∑–æ–≤—ã–π —Å–ª–æ–π (–∫–æ–Ω—Ç–µ–Ω—Ç)
const baseLayer = <Video src={contentUrl} />;

// –≠—Ñ—Ñ–µ–∫—Ç VHS
const vhsLayer = (
  <Video 
    src="/effects/vhs-glitch.mp4" 
    style={{
      mixBlendMode: 'overlay',
      opacity: 0.6
    }}
  />
);

// –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—Ç–æ–≤—ã—Ö —É—Ç–µ—á–µ–∫
const lightLeakLayer = (
  <Video 
    src="/effects/light-leak.mp4" 
    style={{
      mixBlendMode: 'screen',
      opacity: 0.4
    }}
  />
);

// –ö–æ–º–ø–æ–∑–∏—Ü–∏—è —Å–ª–æ—ë–≤
<AbsoluteFill>
  {baseLayer}
  {vhsLayer}
  {lightLeakLayer}
</AbsoluteFill>
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ Blend Modes:
- `normal` - –æ–±—ã—á–Ω–æ–µ
- `multiply` - —É–º–Ω–æ–∂–µ–Ω–∏–µ (–∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ)
- `screen` - –æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ
- `overlay` - –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ (–∫–æ–Ω—Ç—Ä–∞—Å—Ç)
- `darken` - —Ç–µ–º–Ω–µ–µ
- `lighten` - —Å–≤–µ—Ç–ª–µ–µ
- `color-dodge` - –æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤
- `color-burn` - –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤
- `hard-light` - –∂—ë—Å—Ç–∫–∏–π —Å–≤–µ—Ç
- `soft-light` - –º—è–≥–∫–∏–π —Å–≤–µ—Ç
- `difference` - —Ä–∞–∑–Ω–∏—Ü–∞
- `exclusion` - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

---

## üîå API –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

### REST API Endpoints:

#### POST /api/short-video
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–æ–ª–∏–∫–∞

**Request**:
```json
{
  "scenes": [...],
  "config": {...}
}
```

**Response**:
```json
{
  "videoId": "abc123",
  "status": "processing"
}
```

#### GET /api/short-video/:id/status
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

**Response**:
```json
{
  "status": "ready",
  "progress": 100,
  "url": "/api/short-video/abc123"
}
```

#### GET /api/short-video/:id
–°–∫–∞—á–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Ä–æ–ª–∏–∫

**Response**: Binary (video/mp4)

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã:
```bash
npm test
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
```bash
npm run test:integration
```

### E2E —Ç–µ—Å—Ç—ã:
```bash
npm run test:e2e
```

---

## üöÄ ROADMAP –†–ê–ó–†–ê–ë–û–¢–ö–ò

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (–°–ï–ô–ß–ê–°)
- ‚úÖ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å SourceFactory (URL, Files)
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å EffectManager (blend modes)
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å TextOverlay
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –§–∞–∑–∞ 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üîÑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
- üîÑ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- üîÑ Zoom —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —Ñ–æ—Ç–æ
- üîÑ Transitions –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏

### –§–∞–∑–∞ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- üîÑ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- üîÑ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- üîÑ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
- üîÑ GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

---

## üìã CHECKLIST –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

- [ ] –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å –≤ `/src/extensions/`
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ `/src/types/extensions.ts`
- [ ] –ù–ï –ú–ï–ù–Ø–¢–¨ —Ñ–∞–π–ª—ã –≤ `/src/core/`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –±–∞–≥–æ–≤:

- [ ] –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –±–∞–≥ –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å failing test
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å CHANGELOG.md

---

**FantaProjekt Development Team** ¬© 2025

