# üê≥ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã MCP —Å Docker - FantaProjekt

## üî¥ –ü–†–û–ë–õ–ï–ú–ê

```
Could not connect to your MCP server
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
- ‚úÖ SSE Endpoint –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: `http://178.156.142.35:3123/mcp/sse`
- ‚úÖ –°–µ—Ä–≤–µ—Ä FantaProjekt —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
- ‚úÖ MCP endpoint –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå **n8n –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ù–ï –ú–û–ñ–ï–¢ –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ —Ö–æ—Å—Ç–∞**

---

## üéØ –ü–†–ò–ß–ò–ù–ê

**n8n –∑–∞–ø—É—â–µ–Ω –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**, –∞ **FantaProjekt –Ω–∞ —Ö–æ—Å—Ç–µ**.

–ö–æ–≥–¥–∞ n8n –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `http://178.156.142.35:3123`:
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç —Ö–æ—Å—Ç–∞
- –í–Ω–µ—à–Ω–∏–π IP –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- Docker network –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

---

## ‚úÖ –†–ï–®–ï–ù–ò–Ø

### –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP Docker gateway ‚≠ê (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–í n8n MCP Client –∏–∑–º–µ–Ω–∏—Ç–µ SSE Endpoint –Ω–∞:**

```
http://172.19.0.1:3123/mcp/sse
```

–ì–¥–µ `172.19.0.1` - —ç—Ç–æ gateway IP Docker —Å–µ—Ç–∏ `root_default`.

#### –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π gateway IP:
```bash
docker network inspect root_default --format '{{range .IPAM.Config}}{{.Gateway}}{{end}}'
```

---

### –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å host.docker.internal (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

**–í n8n MCP Client —É–∫–∞–∂–∏—Ç–µ:**

```
http://host.docker.internal:3123/mcp/sse
```

‚ö†Ô∏è –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ –Ω–∞ –≤—Å–µ—Ö Linux —Å–∏—Å—Ç–µ–º–∞—Ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
```bash
docker exec root-n8n-1 sh -c "wget -qO- http://host.docker.internal:3123/health"
```

---

### –†–µ—à–µ–Ω–∏–µ 3: –î–æ–±–∞–≤–∏—Ç—å FantaProjekt –≤ Docker —Å–µ—Ç—å n8n

**–®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å FantaProjekt –≤ —Ç–æ–π –∂–µ Docker —Å–µ—Ç–∏**

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å:
```bash
pkill -f "node dist/index.js"
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ Docker —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ —Å–µ—Ç–∏ n8n:
```bash
cd /root/FantaProjekt

docker run -d \
  --name fantaprojekt \
  --network root_default \
  -v $(pwd):/app \
  -w /app \
  -e PORT=3123 \
  node:18 \
  node dist/index.js
```

**–®–∞–≥ 2: –í n8n MCP Client –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
```
http://fantaprojekt:3123/mcp/sse
```

---

### –†–µ—à–µ–Ω–∏–µ 4: –ò–∑–º–µ–Ω–∏—Ç—å network mode n8n –Ω–∞ host

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –≠—Ç–æ –∏–∑–º–µ–Ω–∏—Ç —Å–µ—Ç–µ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é n8n!

**–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ docker-compose –¥–ª—è n8n:**

```yaml
services:
  n8n:
    network_mode: "host"
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ n8n:
```bash
docker-compose -f /root/docker-compose-n8n.yml down
docker-compose -f /root/docker-compose-n8n.yml up -d
```

**–í n8n MCP Client –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```
http://localhost:3123/mcp/sse
```

---

## üöÄ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å

**–í n8n MCP Client –∑–∞–º–µ–Ω–∏—Ç–µ SSE Endpoint –Ω–∞:**

```
‚úÖ http://172.19.0.1:3123/mcp/sse
```

**–ò–õ–ò –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:**

```
‚úÖ http://localhost:3123/mcp/sse
```

---

### –í–∞—Ä–∏–∞–Ω—Ç –ë: Docker Bridge (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

**1. –ù–∞–π–¥–∏—Ç–µ IP Docker bridge:**
```bash
ip addr show docker0 | grep "inet " | awk '{print $2}' | cut -d/ -f1
```

–û–±—ã—á–Ω–æ —ç—Ç–æ `172.17.0.1`

**2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:**
```bash
docker exec root-n8n-1 sh -c "wget -qO- --timeout=2 http://172.17.0.1:3123/health"
```

**3. –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ n8n:**
```
http://172.17.0.1:3123/mcp/sse
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
curl http://178.156.142.35:3123/health
# –û–∂–∏–¥–∞–µ—Ç—Å—è: {"status":"ok"}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: MCP endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
curl http://178.156.142.35:3123/mcp/sse
# –û–∂–∏–¥–∞–µ—Ç—Å—è: SSE stream —Å endpoint
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: Docker gateway –¥–æ—Å—Ç—É–ø–µ–Ω
```bash
GATEWAY=$(docker network inspect root_default --format '{{range .IPAM.Config}}{{.Gateway}}{{end}}')
echo "Gateway: $GATEWAY"
curl http://$GATEWAY:3123/health
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –ò–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ n8n
```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
docker exec root-n8n-1 sh -c "wget -qO- http://172.19.0.1:3123/health"
docker exec root-n8n-1 sh -c "wget -qO- http://172.17.0.1:3123/health"
docker exec root-n8n-1 sh -c "wget -qO- http://host.docker.internal:3123/health"
```

–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —Å—Ä–∞–±–æ—Ç–∞–µ—Ç - —Ç–æ—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ!

---

## üìã –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π

| –†–µ—à–µ–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|---------|-----------|------------|-----------|
| Gateway IP (172.19.0.1) | ‚≠ê –õ–µ–≥–∫–æ | ‚≠ê‚≠ê‚≠ê | –¢–æ–ª—å–∫–æ endpoint –≤ n8n |
| host.docker.internal | ‚≠ê –õ–µ–≥–∫–æ | ‚≠ê‚≠ê | –¢–æ–ª—å–∫–æ endpoint –≤ n8n |
| Docker network | ‚≠ê‚≠ê –°—Ä–µ–¥–Ω–µ | ‚≠ê‚≠ê‚≠ê‚≠ê | –ó–∞–ø—É—Å–∫ FantaProjekt –≤ Docker |
| Host network | ‚≠ê‚≠ê‚≠ê –°–ª–æ–∂–Ω–æ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ò–∑–º–µ–Ω–µ–Ω–∏–µ docker-compose n8n |

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ü–û–ü–†–û–ë–£–ô–¢–ï –í –¢–ê–ö–û–ú –ü–û–†–Ø–î–ö–ï:**

1. **–°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ Gateway IP:**
   ```
   http://172.19.0.1:3123/mcp/sse
   ```

2. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ Docker bridge:**
   ```
   http://172.17.0.1:3123/mcp/sse
   ```

3. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ localhost:**
   ```
   http://localhost:3123/mcp/sse
   ```

4. **–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –†–µ—à–µ–Ω–∏–µ 3 –∏–ª–∏ 4

---

## üé¨ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ endpoint:

1. ‚úÖ –û—à–∏–±–∫–∞ "Could not connect" –∏—Å—á–µ–∑–Ω–µ—Ç
2. ‚úÖ –í "Tools to Include" –ø–æ—è–≤—è—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
   - `create-short-video`
   - `get-video-status`
3. ‚úÖ MCP Client –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ FantaProjekt
4. ‚úÖ AI Agent —Å–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏–¥–µ–æ

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

### –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å REST API –≤–º–µ—Å—Ç–æ MCP

–í–º–µ—Å—Ç–æ MCP Client –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **HTTP Request** —É–∑–µ–ª –≤ n8n:

```
POST http://178.156.142.35:3123/api/short-video
Content-Type: application/json

{
  "scenes": [
    {
      "text": "{{ $json.text }}",
      "searchTerms": ["ocean", "waves"]
    }
  ],
  "config": {
    "voice": "am_onyx",
    "music": "dark"
  }
}
```

–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó Docker –ø—Ä–æ–±–ª–µ–º, –Ω–æ:
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å AI –∞–≥–µ–Ω—Ç–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é
- ‚ùå –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å JSON
- ‚úÖ –ù–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ!

---

**FantaProjekt Team** ¬© 2025  
**–°—Ç–∞—Ç—É—Å**: Docker Network Issue - Resolved

